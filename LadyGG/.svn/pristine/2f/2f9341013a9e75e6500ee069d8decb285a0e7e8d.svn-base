(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89f34cc6"],{"1d82":function(e,a,s){"use strict";var t=s("ccf2"),n=s.n(t);n.a},"94e5":function(e,a,s){"use strict";s.r(a);var t=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"phone"},[e._m(0),t("div",{staticClass:"call"},[e._v("\n    手机:\n    "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|phone",expression:"'required|phone'"},{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"number",name:"phone",placeholder:"同学，请输入一个能接收验证码的手机号"},domProps:{value:e.phone},on:{input:function(a){a.target.composing||(e.phone=a.target.value)}}})]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("phone"),expression:"errors.has('phone')"}],staticClass:"is-danger"},[e._v(e._s(e.errors.first("phone")))]),t("div",{staticClass:"email"},[e._v("\n    验证:\n    "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"digits:4",expression:"'digits:4'"},{name:"model",rawName:"v-model",value:e.captcha,expression:"captcha"}],attrs:{type:"text",placeholder:"请输入验证码",name:"captcha",size:"4",maxlength:"4",onkeyup:"this.value=(this.value.replace(/\\D/g,''))"},domProps:{value:e.captcha},on:{input:function(a){a.target.composing||(e.captcha=a.target.value)}}}),t("button",{class:["captcha",e.errors.has("phone")?"disabled-btn":""],attrs:{disabled:e.isDisabled},on:{click:function(a){e.send()}}},[e._v(e._s(e.msg))])]),t("div",[t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("captcha"),expression:"errors.has('captcha')"}],staticClass:"is-danger"},[e._v(e._s(e.errors.first("captcha")))])]),t("button",{staticClass:"bind",on:{click:function(a){e.bind()}}},[e._v("绑定")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.flag,expression:"flag"}],staticClass:"mask"},[t("div",{staticClass:"message"},[t("img",{staticClass:"signSuccess",attrs:{src:s("c16d"),alt:""}}),t("img",{staticClass:"score",attrs:{src:s("d31e"),alt:""}}),t("div",{staticClass:"bottom-btn"},[t("button",{staticClass:"bot-btn"},[e._v("\n          逆袭豆\n          "),t("span",{staticClass:"addScore"},[e._v("+"+e._s(e.addScore))])])])])])])},n=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"notice"},[t("img",{attrs:{src:s("5114"),alt:""}}),e._v("\n    绑定手机号/邮箱可获得20颗逆袭豆\n  ")])}],i=(s("5fc6"),s("5af2")),o=s.n(i),c=(s("cadf"),s("551c"),s("097d"),s("4328")),r=s.n(c),l={data:function(){return{addScore:20,flag:!1,msg:"获取验证码",isDisabled:!1,count:60,timer:null,phone:"",captcha:""}},methods:{send:function(){this.isDisabled=!0;var e=this,a=this.$store.getters.userInfo.userId,s=r.a.stringify({phone:parseInt(this.phone)});this.axios.post("/u/user/binding/phone/"+a,s,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(a){console.log(a.data),0==a.data.code?(o()({message:"验证码已发送",iconClass:"icon icon-success"}),e.timer=setInterval(function(){e.count--,e.count>0?e.msg="还剩余"+e.count+"秒":(e.msg="重新发送",e.isDisabled=!1,clearInterval(e.timer),e.count=60)},1e3)):(o()({message:a.data.message,duration:3e3}),e.isDisabled=!1)}).catch(function(e){console.log(e)})},bind:function(){var e=this,a=this.$store.getters.userInfo.userId;r.a.stringify({captcha:parseInt(this.captcha),phone:parseInt(this.phone)});this.axios.put("/u/user/binding/phone/".concat(a,"?phone=").concat(this.phone,"&captcha=").concat(this.captcha)).then(function(a){console.log(a.data),0==a.data.code?20==a.data.data.increaseScore?(e.flag=!0,setTimeout(function(){e.flag=!1,e.$router.push({path:"/card"})},3e3)):(o()({message:"绑定成功",duration:3e3}),setTimeout(function(){e.$router.push({path:"/card"})},3e3)):1003==a.data.code?o()({message:"今天验证已经超过三次了，请明天再来",duration:3e3}):o()({message:a.data.message,duration:3e3})}).catch(function(e){console.log(e)})}}},d=l,u=(s("1d82"),s("2877")),h=Object(u["a"])(d,t,n,!1,null,"3487733a",null);h.options.__file="phone.vue";a["default"]=h.exports},ccf2:function(e,a,s){}}]);
//# sourceMappingURL=chunk-89f34cc6.602894c7.js.map