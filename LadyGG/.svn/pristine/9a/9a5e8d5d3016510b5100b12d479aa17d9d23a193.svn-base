(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27b7ffc2"],{"0d43":function(a,e,s){"use strict";s.r(e);var t=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"email"},[a._m(0),t("div",{staticClass:"call"},[a._v("\n    邮箱:\n    "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:a.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"同学，请输入一个能接收验证码的邮箱"},domProps:{value:a.email},on:{input:function(e){e.target.composing||(a.email=e.target.value)}}})]),t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("email"),expression:"errors.has('email')"}],staticClass:"is-danger"},[a._v(a._s(a.errors.first("email")))]),t("div",{staticClass:"email"},[a._v("\n    验证:\n    "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"digits:4",expression:"'digits:4'"},{name:"model",rawName:"v-model",value:a.captcha,expression:"captcha"}],attrs:{type:"text",placeholder:"请输入验证码",name:"captcha",size:"4",maxlength:"4",onkeyup:"this.value=(this.value.replace(/\\D/g,''))"},domProps:{value:a.captcha},on:{input:function(e){e.target.composing||(a.captcha=e.target.value)}}}),t("button",{class:["captcha",a.errors.has("email")?"disabled-btn":""],attrs:{disabled:a.isDisabled},on:{click:function(e){a.send()}}},[a._v(a._s(a.msg))])]),t("div",[t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("captcha"),expression:"errors.has('captcha')"}],staticClass:"is-danger"},[a._v(a._s(a.errors.first("captcha")))])]),t("button",{staticClass:"bind",on:{click:function(e){a.bind()}}},[a._v("绑定")]),t("div",{directives:[{name:"show",rawName:"v-show",value:a.flag,expression:"flag"}],staticClass:"mask"},[t("div",{staticClass:"message"},[t("img",{staticClass:"signSuccess",attrs:{src:s("c16d"),alt:""}}),t("img",{staticClass:"score",attrs:{src:s("d31e"),alt:""}}),t("div",{staticClass:"bottom-btn"},[t("button",{staticClass:"bot-btn"},[a._v("\n          逆袭豆\n          "),t("span",{staticClass:"addScore"},[a._v("+"+a._s(a.addScore))])])])])])])},i=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"notice"},[t("img",{attrs:{src:s("5114"),alt:""}}),a._v("\n    绑定手机号/邮箱可获得20颗逆袭豆\n  ")])}],n=(s("5fc6"),s("5af2")),c=s.n(n),o=s("4328"),r=s.n(o),l={data:function(){return{addScore:20,flag:!1,msg:"获取验证码",isDisabled:!1,count:60,timer:null,captcha:"",email:""}},methods:{send:function(){var a=this,e=this.$store.getters.userInfo.userId;console.log(1),this.isDisabled=!0;var s=r.a.stringify({email:this.email});this.axios.post("/u/user/binding/email/"+e,s,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){console.log(e.data),0==e.data.code?(c()({message:"验证码已发送",iconClass:"icon icon-success"}),a.timer=setInterval(function(){a.count--,a.count>0?a.msg="还剩余"+a.count+"秒":(a.msg="重新发送",a.isDisabled=!1,clearInterval(a.timer),a.count=60)},1e3)):(c()({message:e.data.message,duration:3e3}),a.isDisabled=!1)}).catch(function(a){console.log(a)})},bind:function(){var a=this,e=this.$store.getters.userInfo.userId;r.a.stringify({captcha:parseInt(this.captcha),email:this.email});this.axios.put("/u/user/binding/email/".concat(e,"?email=").concat(this.email,"&captcha=").concat(this.captcha)).then(function(e){console.log(e.data),0==e.data.code?20==e.data.data.increaseScore?(a.flag=!0,setTimeout(function(){a.flag=!1,a.$router.push({path:"/card"})},3e3)):(c()({message:"绑定成功",duration:3e3}),setTimeout(function(){a.$router.push({path:"/card"})},3e3)):1003==e.data.code?c()({message:"今天验证已经超过三次了，请明天再来",duration:3e3}):c()({message:e.data.message,duration:3e3})}).catch(function(a){console.log(a)})}}},d=l,u=(s("d3cb"),s("2877")),m=Object(u["a"])(d,t,i,!1,null,"642af99a",null);m.options.__file="email.vue";e["default"]=m.exports},9286:function(a,e,s){},d3cb:function(a,e,s){"use strict";var t=s("9286"),i=s.n(t);i.a}}]);
//# sourceMappingURL=chunk-27b7ffc2.d9081e32.js.map