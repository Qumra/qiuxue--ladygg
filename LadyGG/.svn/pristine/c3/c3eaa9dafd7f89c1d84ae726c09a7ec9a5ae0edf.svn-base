(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df18c896"],{"0d43":function(a,e,s){"use strict";s.r(e);var t=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"email"},[a._m(0),t("div",{staticClass:"call"},[a._v("\n    邮箱:\n    "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:a.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"同学，请输入一个能接收验证码的邮箱"},domProps:{value:a.email},on:{input:function(e){e.target.composing||(a.email=e.target.value)}}})]),t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("email"),expression:"errors.has('email')"}],staticClass:"is-danger"},[a._v(a._s(a.errors.first("email")))]),t("div",{staticClass:"email"},[a._v("\n    验证:\n    "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"digits:6",expression:"'digits:6'"},{name:"model",rawName:"v-model",value:a.captcha,expression:"captcha"}],attrs:{type:"text",placeholder:"请输入验证码",name:"captcha",size:"6",maxlength:"6",onkeyup:"this.value=(this.value.replace(/\\D/g,''))"},domProps:{value:a.captcha},on:{input:function(e){e.target.composing||(a.captcha=e.target.value)}}}),t("button",{class:["captcha",a.errors.has("email")?"disabled-btn":""],attrs:{disabled:a.isDisabled},on:{click:function(e){a.send(1)}}},[a._v(a._s(a.msg))])]),t("div",[t("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("captcha"),expression:"errors.has('captcha')"}],staticClass:"is-danger"},[a._v(a._s(a.errors.first("captcha")))])]),t("button",{staticClass:"bind",on:{click:function(e){a.bind(1)}}},[a._v("绑定")]),t("div",{directives:[{name:"show",rawName:"v-show",value:a.flag,expression:"flag"}],staticClass:"mask"},[t("div",{staticClass:"message"},[t("img",{staticClass:"signSuccess",attrs:{src:s("c16d"),alt:""}}),t("img",{staticClass:"score",attrs:{src:s("d31e"),alt:""}}),t("div",{staticClass:"bottom-btn"},[t("button",{staticClass:"bot-btn"},[a._v("\n          逆袭豆\n          "),t("span",{staticClass:"addScore"},[a._v("+"+a._s(a.addScore))])])])])])])},i=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"notice"},[t("img",{attrs:{src:s("5114"),alt:""}}),a._v("\n    绑定手机号/邮箱可获得20颗逆袭豆\n  ")])}],n=(s("5fc6"),s("5af2")),c=s.n(n),o=s("4328"),l=s.n(o),r={data:function(){return{addScore:20,flag:!1,msg:"获取验证码",isDisabled:!1,count:60,timer:null,captcha:"",email:""}},methods:{send:function(a){var e=this;console.log(1),this.isDisabled=!0;var s=l.a.stringify({email:this.email});this.axios.post("/api/u/user/binding/email/"+a,s,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(a){console.log(a.data),0==a.data.code?(c()({message:"验证码已发送",iconClass:"icon icon-success"}),e.timer=setInterval(function(){e.count--,e.count>0?e.msg="还剩余"+e.count+"秒":(e.msg="重新发送",e.isDisabled=!1,clearInterval(e.timer),e.count=60)},1e3)):(c()({message:a.data.message,duration:3e3}),e.isDisabled=!1)}).catch(function(a){console.log(a)})},bind:function(a){var e=this;l.a.stringify({captcha:parseInt(this.captcha),email:this.email});this.axios.put("/api/u/user/binding/email/".concat(a,"?email=").concat(this.email,"&captcha=").concat(this.captcha)).then(function(a){console.log(a.data),0==a.data.code?(e.flag=!0,setTimeout(function(){e.flag=!1,e.$router.push({path:"/card"})},3e3)):c()({message:a.data.message,duration:3e3})}).catch(function(a){console.log(a)})}}},d=r,m=(s("593a"),s("2877")),u=Object(m["a"])(d,t,i,!1,null,"d92760ea",null);u.options.__file="email.vue";e["default"]=u.exports},"533f":function(a,e,s){},"593a":function(a,e,s){"use strict";var t=s("533f"),i=s.n(t);i.a}}]);
//# sourceMappingURL=chunk-df18c896.ddc9c982.js.map